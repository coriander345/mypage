---
layout: post
title:  컴퓨터 공학 프로세스와 스레드
date:   2021-08-05 15:01:35 +0300
image:  https://user-images.githubusercontent.com/77090941/119234172-69717180-bb67-11eb-8acc-f687aa97de80.jpg
tags:   Style
---
* 링크 : https://dev-leeyang.tistory.com/14
  
### 프로그램(Program) 
작업을 위해서 실행할 수 있는 파일
* Applications 

### 프로세스(Process)
실헹되고 있는 컴퓨터 프로그램
* 주소 공간 구조
  * 스택(Stack): 프로시저(함수)의 복귀 주소와 지역변수 처럼 일시적인 데이터 저장, 프로시저를 호출 할 수록 커지고 반환할 때 중어든다.
  * 힙(Heap): 자유영역, 시프템 호출을 통해 사용되다 해지되는 자유 영역
  * 데이터: 동적으로 할당받는 영역, 전역 또는 정적 변수를 저장, 읽고 쓰기 가능
  * 텍스트: 프로세서가 실행되는 코드를 저장

* 종류
  * 운영체제 프로세스: 실행순서 제어, 다른 사용자나 운영체제 영역을 침범 못하게 감시, 사용자 프로세스 생성, 입출력 프로세스 생성, 다른 말로 커널 프로세스 또는 시스템 프로세스라고 불린다. 
  * 사용자 프로세스: 사용자 코드를 수행
  * 병행 프로세스: 프로세스 여러개가 동시에 실행
  * 독립 프로세스: 초기값에 따라 항상 같은 결과를 보여주는 프로세스, 다른 프로세스에 영향을 받지 않고, 데이터 공유도 하지 않음
  * 협동 프로세스: 다른 프로세스에 영향을 받고, 베한된 자원을 공유해서 상호 작용이 발생

* 상태와 변화
   
   운영체제는 프로세스 제어를 해야하기 때문에 프로세스 상태를 점검해야합니다. 
   상태는 실행, 대기 또는 보류, 준비가 존재합니다. 

   * 준비 -> 실행 : dispatch라고 불린다. 프로세스가 프로세서를 선택 하는것, 다중 프로그래밍에서 일정시간만 사용할 수 있도록 시간을 제한하는 것을 시간 할당이라고 합니다. 독점하는 것을 방지하기 위헤서죠
   * 실행 -> 준비 : 프로세스의 실행이 다끝나서 종료가 되거나 독점을 맞기 위해 타임아웃의 이유로 실행이 끝나는 것을 의미합니다. 인터럽트 클록(interrupt clock)에서 관리
   * 실행 -> 보류 : 입출력 연상이 필요하거나 새로운 자원 요청(프로세스 스스로 행동함)
   * 대기 - 준비 : 깨우는 과정이다.  

### 스레드(Thread)
프로세스의 실행 단위 
프로세스 하나에 여러 개의 쓰레드가 있을 수 있다. 경량 프로세스라 불리기도 ㅎ나다. 
명령어를 독립적으로 실행할 수 있는 하나의 제어 흐름입니다. 
스레드는 같은 그룹의 스레드와 코드, 주소 공간, 운영체제의 자원을 공유합니다. 

* 구조 
  *  스레드 상태
  *  스택
  *  지역변수와 스레드의 특정 데이터를 저장하기 위한 스레드 별 정적 저장소 
  *  다른 스레드가 공유하는 프로세스의 메모리와 자원에 대한 접근 가능  
  
* 사용 이점 
  * 사용자에 대한 응답성 증가 
  * 프로세스의 자원과 메모리 공유 가능
  * 자원을 공유하기 때문에 스레드를 생성하여 문맥 교환하는 것이 오버레드를 줄인다.
  * 병렬로 실행 가능

* 상태와 변화
  프로세스 처럼 준비, 실행, 대기, 종료 상태로 구분, 다만 자신의 정보를 위한 프로그램 카운터와 스택을 가지고 있다. 
  * 대기: 스레드가 이벤트를 기다릴 때, 스레드를 대기 상태, 자신의 정보(프로그램 카운터, 스택 포인터)를 스택에 저장
  * 준비: 스레드 이벤트가 완료되면 실행 될 수 있는 상태, 준비 리스트에 삽입
  * 실행: 스레드가 프로세서를 점유하여 실행 중인 활성화 상태
  * 종료: 자원을 해제하고 레지스터 문맥과 스택 할당이 제거 
하나의 스레드가 대기 상태로 변할 때 전체 프로세스를 대기 상태로 변화시키지 않는 다는 점이 스레드의 유연적인 장점 


| | | | | | | | | |
|-------|-------|---|---|---|---|---|---|---
Process| 실행 중인 프로그램 | 종료하는 데 시간이 걸린다.| 생성하는 데 더 많은 시간이 걸린다. | 커뮤니케이션 측면에서 프로세스의 효율성이 떨어집니다. | 프로세스가 더 많은 리소스를 소비합니다. | 격리되어 있습니다. | heavy-weight process라고 합니다. | 프로세스 전환은 운영 체제의 인터페이스를 사용합니다. 
Thread| 프로세스의 실행 단위 | 종료하는 데 시간이 덜 걸립니다. | 생성 시간이 덜 걸립니다. | 컨텍스트 전환에 소요되는 시간이 줄어듭니다. | 대화면에서 스레드가 더 효율적입니다. | 스레드는 적은 자원을 소비합니다. | 메모리를 공유합니다. | light-weight process라고 합니다. | 스레드의 전환은 운영체제를 호출하여 커널을 중단 시킬 필요가 없습니다. 

### 멀티프로세스(MultiProcess)와 멀티스레드(MultiThread)
* 멀티프로세스 
  * 하나의 응용프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것입니다. 
  * 부모-자식 관계라고 해도 독립적인 자신만의 메모리 영역을 가집니다. 
  * fork를 통해 프로세스를 복사합니다.
  * 프로세스 간의 통신을 하려면 IPC(Inter Process Communication)를 통해야 합니다. 
  
  * 장점: 여러 개의 자식 프로세스 중 하나에 문제가 발행하면 그 자식만 죽어서 영향이 확산 되지 않는다
  * 단점: 
    * context Switching의 오버헤드- 캐쉬메모리 초기화 등 무거운 작업이 진행되고 많은 시간이 소모 되어 발생
    * 프로세스 사이에 공유하는 메모리가 없어서 모든 데이터를 리셋해야 하기 때문이다. 
    * IPC의 기법이 복잡하다.

* 멀티스레드 : 하나의 응용프로그램을 여러 개의 스레드로 구성하고 각 스레드로 하나의 작엽을 처리, 공유 메모리를 가지고 있다. 
  * 장점 
    * context Switching 시 공유 메모리 만큼 시간 손실이 줄어든다. 
    * 시스템 자원 소모 감소

   * 단점
     * 디버깅이 까다롭습니다. 
     * 단일 프로세스 시스템의 경우 효과를 기대하기 어렵습니다.
     * 자원 공유의 문제가 발생합니다.
     * 하나의 스레드 문제가 발생하면 전체 프로세스의 영향을 받습니다.

